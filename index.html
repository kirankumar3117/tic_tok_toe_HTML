<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tok Toy</title>
</head>
<style>
    *{
        background-color: black;
    }
    #Main{
        color: white;
        display: grid;
        grid-template-columns: repeat(3,70px);
        grid-gap: 1px;
        margin-left: 42%;
        margin-top:2%;
    }
    #Main>div{
        border: 1px solid white;
        height: 70px;
        font-size: large;
        text-align:center;
        font-size:50px;
        color:red;
    }
</style>
<body>
    <div style="color: white;text-align: center;font-size: 20px;margin-top:120px;">Tic Tok Toe</div>
    <div id="Main">
        <div onclick="fun(1)"></div>
        <div onclick="fun(2)"></div>
        <div onclick="fun(3)"></div>
        <div onclick="fun(4)"></div>
        <div onclick="fun(5)"></div>
        <div onclick="fun(6)"></div>
        <div onclick="fun(7)"></div>
        <div onclick="fun(8)"></div>
        <div onclick="fun(9)"></div>
    </div>
</body>
</html>
<script>

var show=document.createElement("p");



show.setAttribute("class","showAll");

var butt=document.createElement("button");
butt.innerHTML="reset";
butt.style.color="white";
butt.style.marginLeft="41.5%";
butt.style.fontSize="18px";
butt.style.marginTop="2%";
butt.style.cursor="pointer"
butt.onmouseover =function(){
    this.style.color="red";
}
butt.onmouseout =function(){
    this.style.color="blue";
}
butt.addEventListener("click",function(){
    window.location.reload();
})

document.body.append(butt,show);

var show_style=document.querySelector(".showAll").style;

//adding css

show_style.color="white";
show_style.marginLeft="42%";
show_style.marginTop="2%";
show_style.fontSize="30px";




var c = document.querySelector("#Main").children;

var arr=[["","",""],["","",""],["","",""]];

    let win=false;   

    let loose=false;

    let draw=false;

    let win_count=0;

    let loose_count=0;


function arr_init(){

    var count=0;
    
    for(var i=0;i<arr.length;i++){
        for(var j=0;j<arr.length;j++){
            c[count].innerHTML=arr[i][j];
            count+=1;
        }
    }

    return;

}

function win_loose(){

      // checking the rows and columns

        for(var i=0;i<arr.length;i++){

            //checking rows

            win_count=0;
            loose_count=0;

            for(var j=0;j<arr.length;j++){

                if(arr[i][j]=="x"){

                    win_count+=1;

                }
                else if(arr[i][j]=="0"){

                    loose_count+=1;
                }

            }

            if(win_count==3){
                win=true;
                return;
            }
            else if(loose_count==3){
                loose=true;
                return;
            }

            //checking columns

            win_count=0;
            loose_count=0;

            for(var j=0;j<arr.length;j++){

                if(arr[j][i]=="x"){

                    win_count+=1;
                }
                else if(arr[j][i]=="0"){

                    loose_count+=1;
                }

            }

            if(win_count==3){
                win=true;
                return;
            }
            else if(loose_count==3){
                loose=true;
                return;
            }


        }

          //checking the cross left

          win_count=0;
          loose_count=0;

          for(var i=0;i<arr.length;i++){

            if(arr[i][i]=="x"){

                win_count+=1;
            }
            else if(arr[i][i]=="0"){

                loose_count+=1;
            }

          }

          if(win_count==3){
            win=true;
            return;
          }
          else if(loose_count==3){
            loose=true;
            return;
          }

          //checking the cross right

          win_count=0;
          loose_count=0;

          var right_count=arr.length-1;

          for(var i=0;i<arr.length;i++){

            if(arr[i][right_count]=="x"){

                win_count+=1;
            }
            else if(arr[i][right_count]=="0"){

                loose_count+=1;
            }

            right_count-=1;

          }

          if(win_count==3){
            win=true;
            return;
          }
          else if(loose_count==3){
            loose=true;
            return;
          }

         
          var count=0;

          for(var i=0;i<9;i++){
            if(c[i].innerHTML=="x" || c[i].innerHTML=="0"){
                count+=1;
            }
          }

          if(count==9){

            draw=true;
            return;
          }

          win_count=0;
          loose_count=0;
          count=0;

}

function add_zero(){



    var flag=false;
if(draw==false && win==false && loose==false){

    //adding random element to empty box

      while(flag==false ){
        var k=Math.round(Math.random()*2);
        var n=Math.round(Math.random()*2);
        console.log(flag);
         for(var i=0;i<3;i++){
            if(arr[i][k]=="x" || arr[i][k]=="0"){
                continue;
            }
            else{
                arr[i][k]="0";
                falg=true;
                show.innerHTML=null;
                arr_init();
                win_loose();
                if(win==true){
                    show.innerHTML="You Win...";
                    show_style.color="green";
                }
                else if(loose==true){
                    show.innerHTML="Computer Win...";
                    show_style.color="red";
                }
                else if(draw==true){
                    show.innerHTML="Tic Tok Toe Draw...";
                    show_style.color="blue";
                }
                return;
            }
        }
       
      }
     
}

}

function fun(m){

    // adding x to array 

    if(win==false && loose==false && draw==false){

    if(m==1){
        arr[0][0]="x";
    }
    else if(m==2){
        arr[0][1]="x";
    }
    else if(m==3){
        arr[0][2]="x";
    }
    else if(m==4){
        arr[1][0]="x";
    }
    else if(m==5){
        arr[1][1]="x";
    }
    else if(m==6){
        arr[1][2]="x";
    }
    else if(m==7){
        arr[2][0]="x";
    }
    else if(m==8){
        arr[2][1]="x";
    }
    else if(m==9){
        arr[2][2]="x";
    }

    show.innerHTML="computer turn.."

}


    // adding x to respected selected box;

    arr_init();

    // checking win or loose or draw and adding 0 if nothing

if(win==false && loose==false){
    setTimeout(()=>{

      win_loose();
      if(win==true){
                    show.innerHTML="You Win...";
                    show_style.color="green";
                }
                else if(loose==true){
                    show.innerHTML="Computer Win...";
                    show_style.color="red";
                }
                else if(draw==true){
                    show.innerHTML="Tic Tok Toe Draw...";
                    show_style.color="blue";
                }
      add_zero();

    },"1000")

}

}










</script>